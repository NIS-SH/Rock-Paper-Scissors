import sys
import random
import pygame
import threading
from PyQt5.QtWidgets import QWidget, QMainWindow, QApplication, QHBoxLayout, QVBoxLayout, QPushButton, QLabel
from PyQt5.QtCore import Qt
from PyQt5.QtGui import QIcon, QPixmap

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("Rock Paper Scissors!")
        self.setWindowIcon(QIcon("RPSLogo.png"))
        self.rock = QPushButton()
        self.paper = QPushButton()
        self.scissors = QPushButton()
        self.game_chc = ("",)
        self.score = 0
        self.menu()

    def full_style(self):
        return """
            QMainWindow {
                background-color: hsl(189, 100%, 84%);
            }
            QLabel#Title{
                font-size: 50px;
                font-family: Arial;
                color: red;
                }
            QLabel#Til{
                font-size: 60px;
                font-family: Trebuchet MS;
                font-weight:500;
                color: red;
                }    
            QLabel#WinText{
                font-size: 60px;
                font-family: Trebuchet MS;
                font-weight:400;
                color: red;
                }
            QLabel#LoseText{
                font-size: 60px;
                font-family: Trebuchet MS;
                font-weight:400;
                color: red;
                }  
            QLabel#DrawText{
                font-size: 60px;
                font-family: Trebuchet MS;
                font-weight:400;
                color: red;
                }
            QLabel#t1{
                font-size: 60px;
                font-family: Arial;
                color: red;
                }  
            QLabel#t2{
                font-size: 60px;
                font-family: Arial;
                color: red;
                }  
                
            QPushButton#But {
                font-size: 30px;
                font-family: Trebuchet MS;
                padding: 15px 55px;
                border: 3px solid;
                border-radius: 30px;
                background-color: hsl(142, 49%, 58%);
                }
            QPushButton#But:hover {
                background-color: hsl(142, 49%, 78%);
                }
            QPushButton#ExitBut {
                font-size: 30px;
                font-family: Trebuchet MS;
                padding: 15px 55px;
                border: 3px solid;
                border-radius: 30px;
                background-color: hsl(0, 70%, 67%);
                }
            QPushButton#ExitBut:hover {
                background-color: hsl(0, 70%, 87%);
                }

            QPushButton#R{
                font-size: 30px;
                font-family: Trebuchet MS;
                padding: 15px 55px;
                border: 3px solid;
                border-radius: 30px;
                background-color: hsl(188, 5%, 51%);
                }
            QPushButton#R:hover {
                background-color: hsl(188, 5%, 71%);
                }
            
            QPushButton#P{
                font-size: 30px;
                font-family: Trebuchet MS;
                padding: 15px 50px;
                border: 3px solid;
                border-radius: 30px;
                background-color: hsl(26, 32%, 80%);
                }
            QPushButton#P:hover {
                background-color: hsl(26, 32%, 100%);
                }
            
            QPushButton#S{
                font-size: 30px;
                font-family: Trebuchet MS;
                padding: 15px 35px;
                border: 3px solid;
                border-radius: 30px;
                background-color: hsl(261, 15%, 61%);
                }
            QPushButton#S:hover {
                background-color: hsl(261, 15%, 81%);
                }
                
            QPushButton#But1 {
                font-size: 30px;
                font-family: Trebuchet MS;
                padding: 15px 55px;
                border: 3px solid;
                border-radius: 30px;
                background-color: hsl(142, 49%, 58%);
                }
            QPushButton#But1:hover {
                background-color: hsl(142, 49%, 78%);
                }
            
            
            QPushButton#But2 {
                font-size: 30px;
                font-family: Trebuchet MS;
                padding: 15px 55px;
                border: 3px solid;
                border-radius: 30px;
                background-color: hsl(0, 70%, 67%);
                }
            QPushButton#But2:hover {
                background-color: hsl(0, 70%, 87%);
                }
            
            QPushButton#BM {
                font-size: 30px;
                font-family: Trebuchet MS;
                padding: 15px 55px;
                border: 3px solid;
                border-radius: 30px;
                background-color: hsl(142, 49%, 58%);
                }
            QPushButton#BM:hover {
                background-color: hsl(142, 49%, 78%);
                }
            """

    def menu(self):
        self.score = 0
        central_widget = QWidget()
        self.setCentralWidget(central_widget)
        pixmap = QPixmap("RockPaperScissorsLogoo-removebg-preview.png")

        title = QLabel(self)
        title.setPixmap(pixmap)
        title.setScaledContents(True)

        button = QPushButton("Start")
        button.setObjectName("But")

        exit_button = QPushButton("Exit", self)
        exit_button.setObjectName("ExitBut")
        exit_button.clicked.connect(self.close)

        vox = QVBoxLayout()
        vox.addWidget(title, alignment=Qt.AlignCenter)
        vox.addWidget(button, alignment=Qt.AlignCenter)
        vox.addWidget(exit_button, alignment=Qt.AlignCenter)

        central_widget.setLayout(vox)
        button.clicked.connect(self.game)
        self.setStyleSheet(self.full_style())

    def game(self):
        self.game_chc= random.choice(("ROCK", "PAPER", "SCISSORS"))
        central_widget = QWidget()
        self.setCentralWidget(central_widget)
        title = QLabel("Choose one", self)
        title.setObjectName("Til")
        self.rock = QPushButton("Rock", self)
        self.paper = QPushButton("Paper", self)
        self.scissors = QPushButton("Scissors", self)
        self.rock.setObjectName("R")
        self.paper.setObjectName("P")
        self.scissors.setObjectName("S")

        vox = QVBoxLayout()
        vox.addWidget(title, alignment= Qt.AlignCenter)
        vox.addWidget(self.rock, alignment= Qt.AlignCenter)
        vox.addWidget(self.paper, alignment= Qt.AlignCenter)
        vox.addWidget(self.scissors, alignment= Qt.AlignCenter)

        central_widget.setLayout(vox)
        self.setStyleSheet(self.full_style())

        self.rock.pressed.connect(self.pressed)
        self.paper.pressed.connect(self.pressed)
        self.scissors.pressed.connect(self.pressed)

    def pressed(self):
        name = self.sender()
        bname = name.text()

        if bname=="Rock":
            if self.game_chc=="ROCK":
                self.drawscreen()
            elif self.game_chc=="PAPER":
                self.losescreen()
            else:
                self.winscreen()

        elif bname=="Paper":
            if self.game_chc=="ROCK":
                self.winscreen()
            elif self.game_chc=="PAPER":
                self.drawscreen()
            else:
                self.losescreen()

        else:
            if self.game_chc=="ROCK":
                self.losescreen()
            elif self.game_chc=="PAPER":
                self.winscreen()
            else:
                self.drawscreen()

    def winscreen(self):
        central_widget = QWidget()
        self.setCentralWidget(central_widget)
        self.score+=1
        text1= QLabel("üëëYou Winüëë", self)
        But1= QPushButton("Play Again", self)
        But2 = QPushButton("Stop Playing", self)

        text1.setObjectName("WinText")
        But1.setObjectName("But1")
        But2.setObjectName("But2")
        vox = QVBoxLayout()
        vox.addWidget(text1, alignment= Qt.AlignCenter)
        vox.addWidget(But1, alignment= Qt.AlignCenter)
        vox.addWidget(But2, alignment=Qt.AlignCenter)

        But1.clicked.connect(self.game)
        But2.clicked.connect(self.game_over)

        central_widget.setLayout(vox)
        self.setStyleSheet(self.full_style())

    def losescreen(self):
        central_widget = QWidget()
        self.setCentralWidget(central_widget)
        text1 = QLabel("‚ùåYou Lose‚ùå", self)
        But1 = QPushButton("Play Again", self)
        But2 = QPushButton("Stop Playing", self)

        text1.setObjectName("LoseText")
        But1.setObjectName("But1")
        But2.setObjectName("But2")
        vox = QVBoxLayout()
        vox.addWidget(text1, alignment=Qt.AlignCenter)
        vox.addWidget(But1, alignment=Qt.AlignCenter)
        vox.addWidget(But2, alignment=Qt.AlignCenter)

        But1.clicked.connect(self.game)
        But2.clicked.connect(self.game_over)

        central_widget.setLayout(vox)
        self.setStyleSheet(self.full_style())

    def drawscreen(self):
        central_widget = QWidget()
        self.setCentralWidget(central_widget)
        text1 = QLabel("üîÅIt's a DrawüîÅ", self)
        But1 = QPushButton("Play Again", self)
        But2 = QPushButton("Stop Playing", self)

        text1.setObjectName("DrawText")
        But1.setObjectName("But1")
        But2.setObjectName("But2")
        vox = QVBoxLayout()
        vox.addWidget(text1, alignment=Qt.AlignCenter)
        vox.addWidget(But1, alignment=Qt.AlignCenter)
        vox.addWidget(But2, alignment=Qt.AlignCenter)

        But1.clicked.connect(self.game)
        But2.clicked.connect(self.game_over)

        central_widget.setLayout(vox)
        self.setStyleSheet(self.full_style())

    def game_over(self):
        central_widget = QWidget()
        self.setCentralWidget(central_widget)
        text1 = QLabel("üõëGAME OVERüõë", self)
        text2 = QLabel(f"Your Score : {self.score}", self)
        buton = QPushButton("Menu", self)
        buton.setObjectName("BM")
        text1.setObjectName("t1")
        text2.setObjectName("t2")
        vox = QVBoxLayout()
        vox.addWidget(text1, alignment=Qt.AlignCenter)
        vox.addWidget(text2, alignment=Qt.AlignCenter)
        vox.addWidget(buton, alignment=Qt.AlignCenter)

        buton.clicked.connect(self.menu)

        central_widget.setLayout(vox)
        self.setStyleSheet(self.full_style())

def pmusic():
    pygame.mixer.init()
    pygame.mixer.music.load("Kevin MacLeod [Official] - Pixelland - incompetech.com.mp3")
    pygame.mixer.music.play(-1)

def main():
    app = QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec_())

music= threading.Thread(target=pmusic)
music.start()

main()
